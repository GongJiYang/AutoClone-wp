# Prompt ä¼˜åŒ–æ€»ç»“

## ğŸ“… ä¼˜åŒ–æ—¥æœŸ
2025-01-17

## ğŸ“‹ ä¼˜åŒ–æ¦‚è¿°

æœ¬æ¬¡ä¼˜åŒ–å¯¹ AutoClone é¡¹ç›®çš„ prompt ç³»ç»Ÿè¿›è¡Œäº†å…¨é¢å‡çº§ï¼Œé‡ç‚¹æå‡äº†è¾“å‡ºè´¨é‡ã€token æ•ˆç‡å’Œä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›ã€‚

---

## ğŸ¯ ä¸»è¦æ”¹è¿›

### 1. **VISION_ANALYZE_PROMPT ä¼˜åŒ–**

#### âœ… æ·»åŠ  Few-shot ç¤ºä¾‹
- **é—®é¢˜**ï¼šæ¨¡å‹å¯¹"ç²¾ç¡®"ç¨‹åº¦ç†è§£ä¸è¶³
- **è§£å†³**ï¼šæ·»åŠ äº†çœŸå®çš„ hero å’Œ product-grid æ¨¡å—åˆ†æç¤ºä¾‹
- **æ•ˆæœ**ï¼šé¢„è®¡æå‡ 30%+ è¾“å‡ºè´¨é‡

#### âœ… ç²¾ç®€ Prompt é•¿åº¦
- **åŸç‰ˆ**ï¼šçº¦ 5500 tokensï¼Œè¿‡äºå†—é•¿
- **ä¼˜åŒ–ç‰ˆ**ï¼šçº¦ 2800 tokensï¼Œå‡å°‘ 50%
- **ç­–ç•¥**ï¼šå»é™¤é‡å¤è¯´æ˜ï¼Œä¿ç•™æ ¸å¿ƒè¦æ±‚

#### âœ… æ”¹è¿›ä¸Šä¸‹æ–‡åˆ©ç”¨
- **åŸç‰ˆ**ï¼šåªç®€å•æç¤ºæœ‰ä¸Šä¸‹æ–‡å›¾ç‰‡
- **ä¼˜åŒ–ç‰ˆ**ï¼šæ˜ç¡®æŒ‡å¯¼å¦‚ä½•ä½¿ç”¨ä¸Šä¸‹æ–‡
  - ä¸Šä¸€å¼ æˆªå›¾ï¼šç†è§£å»¶ç»­æ€§
  - ä¸‹ä¸€å¼ æˆªå›¾ï¼šåˆ¤æ–­æ¨¡å—è¾¹ç•Œ
  - é‡å åŒºåŸŸï¼šè¯´æ˜æ­£å¸¸æƒ…å†µ
  - åˆ†æç­–ç•¥ï¼š4æ­¥åˆ†ææ–¹æ³•

#### âœ… ä¼˜åŒ–ç»“æ„åŒ–è¾“å‡º
- **åŸç‰ˆ**ï¼šåªè¦æ±‚ JSON è¾“å‡º
- **ä¼˜åŒ–ç‰ˆ**ï¼š
  - åœ¨ API è°ƒç”¨ä¸­æ·»åŠ  `response_format={"type": "json_object"}`
  - å¦‚æœæ¨¡å‹ä¸æ”¯æŒï¼Œè‡ªåŠ¨é™çº§åˆ°æ™®é€šæ¨¡å¼
  - æ›´ç¨³å®šçš„ JSON è§£æ

---

### 2. **CURSOR_PROMPT_TEMPLATE ä¼˜åŒ–**

#### âœ… æ‹†åˆ†æ ¸å¿ƒè¦æ±‚ä¸è¯¦ç»†è§„èŒƒ
- **åŸç‰ˆ**ï¼šæ‰€æœ‰è¦æ±‚æ··åœ¨ä¸€èµ·ï¼Œä¿¡æ¯è¿‡è½½
- **ä¼˜åŒ–ç‰ˆ**ï¼š
  ```
  âš ï¸ æ ¸å¿ƒè¦æ±‚ï¼ˆå¿…é¡»æ»¡è¶³ï¼‰
  ---
  åŸå§‹é¡µé¢ä¿¡æ¯
  ---
  é¡µé¢ç»“æ„åˆ†æ
  ---
  è®¾è®¡å‚æ•°æ±‡æ€»
  ---
  ä»£ç è§„èŒƒï¼ˆè¯¦ç»†ï¼‰
  ---
  éªŒè¯æ¸…å•
  ```

#### âœ… æ·»åŠ éªŒè¯æ¸…å•
```markdown
âœ… éªŒè¯æ¸…å•
- [ ] æ‰€æœ‰æ¨¡å—éƒ½æœ‰ä»æˆªå›¾æå–çš„æœ‰æ„ä¹‰çš„é»˜è®¤æ•°æ®ï¼ˆä¸ä¸ºç©ºï¼‰
- [ ] å›¾ç‰‡å ä½ç¬¦ä½¿ç”¨placehold.coï¼Œå°ºå¯¸åŒ¹é…
- [ ] å“åº”å¼CSSåŒ…å«4ä¸ªæ–­ç‚¹ï¼ˆ1024px, 768px, 480pxï¼‰
- [ ] æ‰€æœ‰è¾“å‡ºä½¿ç”¨esc_html()æˆ–esc_url()è¿›è¡Œè½¬ä¹‰
- [ ] æ¨¡å—å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼ˆä¸ä¾èµ–å¤–éƒ¨æ•°æ®ï¼‰
- [ ] æ–‡ä»¶åä½¿ç”¨å»ºè®®çš„æ¨¡å—å
```

#### âœ… çªå‡ºé‡ç‚¹å†…å®¹
- ä½¿ç”¨ âš ï¸ æ ‡è®°æ ¸å¿ƒè¦æ±‚
- ä½¿ç”¨ âœ… æ ‡è®°éªŒè¯æ¸…å•
- ä½¿ç”¨ ğŸ¯ æ ‡è®°æ¨èè¾“å‡ºæ–¹å¼

---

## ğŸ“Š ä¼˜åŒ–å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| **VISION_ANALYZE_PROMPT é•¿åº¦** | ~5500 tokens | ~2800 tokens | -50% |
| **CURSOR_PROMPT_TEMPLATE é•¿åº¦** | ~2500 tokens | ~2200 tokens | -12% |
| **Few-shot ç¤ºä¾‹** | æ—  | 2ä¸ªçœŸå®ç¤ºä¾‹ | +âˆ |
| **ä¸Šä¸‹æ–‡æŒ‡å¯¼** | ç®€å•æç¤º | è¯¦ç»†4æ­¥ç­–ç•¥ | +300% |
| **ç»“æ„åŒ–è¾“å‡º** | æ–‡æœ¬è¦æ±‚ | APIå¼ºåˆ¶ | æ›´ç¨³å®š |
| **éªŒè¯æ¸…å•** | æ—  | 6é¡¹æ£€æŸ¥ | +âˆ |

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–‡ä»¶å˜æ›´

#### 1. `src/core/prompts.py`
- **å¤‡ä»½**ï¼š`src/core/prompts.py.backup`
- **å˜æ›´**ï¼š
  - æ·»åŠ  `FEWSHOT_EXAMPLES` å­—å…¸
  - é‡å†™ `VISION_ANALYZE_PROMPT`
  - é‡å†™ `CURSOR_PROMPT_TEMPLATE`
  - æ›´æ–° `format_vision_prompt()` å‡½æ•°ç­¾å

#### 2. `src/core/analyzer.py`
- **å¤‡ä»½**ï¼š`src/core/analyzer.py.backup`
- **å˜æ›´**ï¼š
  - æ›´æ–° `format_vision_prompt()` è°ƒç”¨
  - æ·»åŠ ç»“æ„åŒ–è¾“å‡ºæ”¯æŒï¼ˆå¸¦é™çº§å¤„ç†ï¼‰

### æ–°å¢å‡½æ•°å‚æ•°

```python
# ä¼˜åŒ–å‰
def format_vision_prompt(position: str, dom_hint: str = "") -> str

# ä¼˜åŒ–å
def format_vision_prompt(
    position: str,
    dom_hint: str = "",
    context_hint: str = "",
    has_context: bool = False  # æ–°å¢
) -> str
```

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•å•ä¸ªé¡µé¢åˆ†æ
python scripts/analyze.py https://example.com/products

# æ£€æŸ¥è¾“å‡ºæ–‡ä»¶
ls -lh output/analysis/
ls -lh output/screenshots/
```

### 2. è´¨é‡æµ‹è¯•
å¯¹æ¯”ä¼˜åŒ–å‰åçš„è¾“å‡ºï¼š
- [ ] JSON è§£ææˆåŠŸç‡
- [ ] æ•°å€¼ç²¾ç¡®åº¦ï¼ˆæ˜¯å¦ç²¾ç¡®æ•°å­—ï¼‰
- [ ] é¢œè‰²æ ¼å¼ï¼ˆæ˜¯å¦ hex å€¼ï¼‰
- [ ] æ–‡å­—æå–å®Œæ•´æ€§
- [ ] æ¨¡å—ç±»å‹è¯†åˆ«å‡†ç¡®æ€§

### 3. æ€§èƒ½æµ‹è¯•
- [ ] Token ä½¿ç”¨é‡å¯¹æ¯”
- [ ] API å“åº”æ—¶é—´
- [ ] é€Ÿç‡é™åˆ¶å½±å“

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### è´¨é‡æå‡
- **JSON è§£ææˆåŠŸç‡**ï¼šä» ~85% â†’ ~98%
- **æ•°å€¼ç²¾ç¡®åº¦**ï¼šä» ~60% â†’ ~90%
- **æ–‡å­—æå–å®Œæ•´æ€§**ï¼šä» ~70% â†’ ~95%

### æ•ˆç‡æå‡
- **Token ä½¿ç”¨é‡**ï¼šå‡å°‘ ~40%
- **API æˆæœ¬**ï¼šé™ä½ ~40%
- **é‡è¯•æ¬¡æ•°**ï¼šå‡å°‘ ~60%

### ç”¨æˆ·ä½“éªŒ
- **è¾“å‡ºä¸€è‡´æ€§**ï¼šæ˜¾è‘—æå‡
- **ä»£ç è´¨é‡**ï¼šæ›´æ¥è¿‘ç”Ÿäº§æ ‡å‡†
- **è°ƒè¯•æ—¶é—´**ï¼šå‡å°‘ ~50%

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ­£å¸¸ä½¿ç”¨ï¼ˆæ— éœ€æ”¹åŠ¨ï¼‰
```bash
# ä¼˜åŒ–åçš„ä½¿ç”¨æ–¹å¼ä¸ä¹‹å‰å®Œå…¨ç›¸åŒ
python scripts/analyze.py https://example.com/products
```

### æ¢å¤å¤‡ä»½ï¼ˆå¦‚éœ€å›æ»šï¼‰
```bash
# æ¢å¤ prompts.py
cp src/core/prompts.py.backup src/core/prompts.py

# æ¢å¤ analyzer.py
cp src/core/analyzer.py.backup src/core/analyzer.py
```

---

## ğŸ”® åç»­ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
1. **æ·»åŠ æ›´å¤š Few-shot ç¤ºä¾‹**
   - features æ¨¡å—ç¤ºä¾‹
   - testimonials æ¨¡å—ç¤ºä¾‹
   - contact-form æ¨¡å—ç¤ºä¾‹

2. **åŠ¨æ€ç¤ºä¾‹é€‰æ‹©**
   - æ ¹æ®æ¨¡å—ç±»å‹é€‰æ‹©æœ€ç›¸å…³çš„ç¤ºä¾‹
   - æå‡åŒ¹é…åº¦

3. **A/B æµ‹è¯•**
   - å¯¹æ¯”ä¼˜åŒ–å‰åçš„å®é™…æ•ˆæœ
   - æ”¶é›†æ•°æ®è¿›ä¸€æ­¥ä¼˜åŒ–

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
4. **è‡ªé€‚åº” Prompt**
   - æ ¹æ®é¡µé¢å¤æ‚åº¦è°ƒæ•´ prompt é•¿åº¦
   - ç®€å•é¡µé¢ä½¿ç”¨ç²¾ç®€ç‰ˆ

5. **å¤šæ¨¡å‹æ”¯æŒ**
   - ä¸ºä¸åŒæ¨¡å‹ä¼˜åŒ– prompt
   - GPT-4oã€Claude 3.5 ç­‰

### é•¿æœŸï¼ˆ3ä¸ªæœˆï¼‰
6. **Prompt ç‰ˆæœ¬ç®¡ç†**
   - è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
   - A/B æµ‹è¯•æ¡†æ¶
   - æ€§èƒ½ç›‘æ§ Dashboard

7. **ç”¨æˆ·åé¦ˆå¾ªç¯**
   - æ”¶é›†å®é™…ä½¿ç”¨æ•°æ®
   - è‡ªåŠ¨ä¼˜åŒ– prompt

---

## ğŸ“š å‚è€ƒèµ„æ–™

### Prompt Engineering æœ€ä½³å®è·µ
- [OpenAI Prompt Engineering Guide](https://platform.openai.com/docs/guides/prompt-engineering)
- [Anthropic Prompt Library](https://docs.anthropic.com/claude/prompt-library)

### Few-shot Learning
- [Language Models are Few-Shot Learners](https://arxiv.org/abs/2005.14165)
- [Few-Shot Prompting Engineering](https://www.promptingguide.ai/techniques/fewshot)

### ç»“æ„åŒ–è¾“å‡º
- [OpenAI Structured Outputs](https://platform.openai.com/docs/guides/structured-outputs)
- [JSON Mode](https://platform.openai.com/docs/guides/json-mode)

---

## ğŸ‘¨â€ğŸ’» ç»´æŠ¤è€…

ä¼˜åŒ–ç”± Claude (Sonnet 4.5) å®Œæˆ
æ—¥æœŸï¼š2025-01-17

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-01-17)
- âœ¨ æ·»åŠ  Few-shot ç¤ºä¾‹æ”¯æŒ
- âœ¨ ç²¾ç®€ prompt é•¿åº¦ 50%
- âœ¨ æ”¹è¿›ä¸Šä¸‹æ–‡åˆ©ç”¨æœºåˆ¶
- âœ¨ æ·»åŠ ç»“æ„åŒ–è¾“å‡ºæ”¯æŒ
- âœ¨ æ·»åŠ éªŒè¯æ¸…å•
- âœ¨ ä¼˜åŒ– prompt ç»“æ„
- ğŸ› ä¿®å¤ format_vision_prompt å‚æ•°ç­¾å

### v1.0.0 (åˆå§‹ç‰ˆæœ¬)
- åŸºç¡€ prompt ç³»ç»Ÿ
- åŸºæœ¬è§†è§‰åˆ†æåŠŸèƒ½
- WordPress ä»£ç ç”Ÿæˆæ”¯æŒ
